!function e(n,t,r){function s(u,i){if(!t[u]){if(!n[u]){var c="function"==typeof require&&require;if(!i&&c)return c(u,!0);if(o)return o(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var f=t[u]={exports:{}};n[u][0].call(f.exports,function(e){var t=n[u][1][e];return s(t?t:e)},f,f.exports,e,n,t,r)}return t[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)s(r[u]);return s}({1:[function(e,n,t){"use strict";var r=e("./retry.socket.js"),s=e("./queue/index.js"),o=e("./retry/index.js"),u={extendRapportInstance:function(e){e.constructWebsocket=function(n,t){var u=r(e.Websocket,n,t.protocols,t.connection);return u.setRetryer(o(t.reconnect)),u.setMessageQueue(s(t.reconnect)),u.connect()}}};"undefined"!=typeof window&&(window.RapportReconnect=u),"undefined"!=typeof n&&(n.exports=u)},{"./queue/index.js":2,"./retry.socket.js":4,"./retry/index.js":5}],2:[function(e,n,t){"use strict";var r=e("./simple.queue.js"),s=function(e){if(!e||!e.queueMessages)return null;var n={};if(e.queueMessages===!0?n.type="simple":"string"==typeof e.queueMessages?n.type=e.queueMessages:n=e.queueMessages,n.type&&"simple"!==n.type)throw new TypeError("Invalid message queue type: "+n.type);return r()};n.exports=s},{"./simple.queue.js":3}],3:[function(e,n,t){"use strict";var r=function(){var e={messages:[],push:function(n){e.messages.push(n)},purge:function(){e.messages=[]},flush:function(n){for(;e.messages.length>0;)n(e.messages.shift())}};return e};n.exports=r},{}],4:[function(e,n,t){(function(e){"use strict";var t=("undefined"!=typeof window?window.Rapport:"undefined"!=typeof e?e.Rapport:null).standardize,r=function(e,n,r,s){var o={wsImplementation:e,url:n,protocols:r,connectionOptions:s,instance:null,handlers:{open:function(){},message:function(){},error:function(){},close:function(){}},retryer:null,messageQueue:null,connecting:!1,closed:!1,setRetryer:function(e){o.retryer=e},setMessageQueue:function(e){o.messageQueue=e},successfullyConnected:function(){o.connecting=!1,o.retryer&&(o.retryer.cancel(),o.retryer.reset()),o.messageQueue&&o.messageQueue.flush(o.send),o.handlers.open()},abort:function(e,n){o.connecting=!1,o.messageQueue&&o.messageQueue.purge(),o.handlers.close(e,n)},reconnect:function(e,n){return o.closed||1e3===e||!o.retryer?void o.abort(e,n):(o.connecting=!0,void o.retryer.attempt(o.connect,o.abort.bind(o,e,n)))},connect:function(){return o.connecting=!0,o.instance=t(new o.wsImplementation(o.url,o.protocols,o.connectionOptions)),o.instance.onOpen(o.successfullyConnected),o.instance.onClose(o.reconnect),o.instance.onMessage(function(e){o.handlers.message(e)}),o.instance.onError(function(e){o.handlers.error(e)}),o},removeAllListeners:function(){},on:function(e,n){o.handlers[e]=n},send:function(e){o.connecting?o.messageQueue&&o.messageQueue.push(e):o.instance.send(e)},close:function(e,n){o.closed=!0,o.retryer&&o.retryer.cancel(),o.messageQueue&&o.messageQueue.purge();try{o.instance.close(e,n)}catch(e){}}};return o};n.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,n,t){"use strict";var r=e("./interval.retry.js"),s=function(e){if(!e)return null;var n={};if(e===!0?n.type="interval":"string"==typeof e?n.type=e:n=e,e.type&&"interval"!==e.type)throw new TypeError("Invalid reconnect type: "+n.type);return r(n)};n.exports=s},{"./interval.retry.js":6}],6:[function(e,n,t){"use strict";var r=function(e){var n={attempts:0,maxAttempts:e.maxAttempts||0,interval:e.interval||500,timeout:null,attempt:function(e,t){return n.maxAttempts&&n.attempts>=n.maxAttempts?void t():(n.attempts++,void(n.timeout=setTimeout(e,n.interval)))},reset:function(){n.attempts=0},cancel:function(){n.timeout&&(clearTimeout(n.timeout),n.timeout=null)}};return n};n.exports=r},{}]},{},[1]);
